@import jrocks.model.ClassInfo
@import jrocks.model.FieldClassInfo
@import jrocks.generator.bean.annotations.BuilderProperty
@import jrocks.model.ClassInfoParameter
@import java.time.LocalDateTime
@import java.time.format.DateTimeFormatter

@option discardLogicWhitespace=true

@args(ClassInfo bean, ClassInfoParameter param)

package @bean.packageName();

import javax.annotation.Generated;
@for (FieldClassInfo fieldInfo : bean.getFields()) {
  @if(param.toInclude(fieldInfo.fieldName())) {
import @fieldInfo.canonicalName();
}
}
import java.util.Objects;

/**
 * Builder for the @bean.simpleName() bean.
 */
@@Generated(value = "jrocks", date = "@LocalDateTime.now().format(DateTimeFormatter.ISO_DATE_TIME)")
public class @bean.simpleName()Builder {

  private @bean.simpleName() @bean.propertyName() = new @bean.simpleName()();

  public @bean.simpleName() build() {
@for (FieldClassInfo p : bean.getFields()) {
  @if(p.isRequired() || param.getMandatoryFields().contains(p.fieldName())) {
    Objects.requireNonNull(@String.format("%s.%s()", bean.propertyName(), p.getter()), "@String.format("%s is required!", p.fieldNameCapitalized())");
  }
}
    return @bean.propertyName();
  }

@for (FieldClassInfo fieldInfo : bean.getFields()) {
  @if(param.toInclude(fieldInfo.fieldName())) {
  public @bean.simpleName()Builder @fieldInfo.setter()(@fieldInfo.simpleName() @fieldInfo.fieldName()) {
    @String.format("%s.set%s(%s)", bean.propertyName(), fieldInfo.fieldNameCapitalized(), fieldInfo.fieldName());
    return this;
  }

  }
}
}